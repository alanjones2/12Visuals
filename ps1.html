<html>

<head>

    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>

    <py-env>
        - matplotlib
        - pandas
    </py-env>
</head>

<body>
    <div class="jumbotron">
        <h1>12 Essential Visuals</h1>
        <span class="lead">
            From the book
        
        <a href="https://amzn.to/3dJlMaS" target = "_blank">
            <i>Storytelling with Data, a data visualization guide 
            for business professionals
            </i>
        </a>
</span>
    </div>



    <div class = "row">
        <div class="col-sm-3 p-2 shadow ml-4 mr-4 mb-4 bg-white rounded">
            <h3 class="lead">Some times simple text is all that is needed to communicate information</h3>
            <p>These figures are produced by placing text in an empty Matplotlib figure
        </div>
        <div class="col-sm-6">
            <div class="row">
                <div class="col-sm-10 p-2 shadow ml-4 mr-4 mb-4 bg-white rounded">
                    <div id="chart1"></div>
                </div>

            </div>  
            <div class = "row">
                    <div class="col-sm-10 p-2 shadow ml-4 mr-4 mb-4 bg-white rounded">
                    <div id="chart2"></div>
                </div>
            </div>  
            </div>  
        </div>
    </div>

    <div class = "row">
        <div class="col-sm-3 p-2 shadow ml-4 mr-4 mb-4 bg-white rounded">
            <h3 class="lead">Tables</h3>
            <p>The first figure is produced by creating a Matplotlib table but without 
            plotting a figure. The second is the rendering of a Pandas dataframe.
        </div>
        <div class="col-sm-6">
            <div class="row">
                <div class="col-sm-10 p-2 shadow ml-4 mr-4 mb-4 bg-white rounded">
                    <div id="chart3"></div>
                </div>
            </div>  
              <div class="row">
                <div class="col-sm-10 p-2 shadow ml-4 mr-4 mb-4 bg-white rounded">
                    <div id="chart4"></div>
                </div>
            </div>  
  
        </div>
    </div>


    <py-script output="chart1">
        # Import libraries
        import pandas as pd
        import matplotlib.pyplot as plt

        # Set up variables
        days = ['Yesterday','Today']
        temps = [24,29]
        caption = f"Today's temperature was {temps[1]}°C"
        caption2 =  f"That's {temps[1]-temps[0]}° up from yesterday"


        fig2, ax2 = plt.subplots(figsize=(5,1))

        ax2.text(0, 0.9, temps[1],
                verticalalignment='top', horizontalalignment='left',
                color='red', fontsize=18, fontweight = 'bold')
        ax2.text(0.2, 0.9, caption,
                verticalalignment='top', horizontalalignment='left',
                color='Black', fontsize=10)
        ax2.text(0.2, 0.55, caption2,
                verticalalignment='top', horizontalalignment='left',
                color='darkgrey', fontsize=6)

        ax2.axis('off')

        fig2
    </py-script>    
    <py-script output="chart2">

        fig3, ax3 = plt.subplots(figsize=(4,2))

        ax3.text(0.5, 0.9, temps[1],
                verticalalignment='top', horizontalalignment='center',
                color='darkblue', fontsize=64, fontweight = 'bold')
        ax3.text(0.5, 0.3, caption,
                verticalalignment='top', horizontalalignment='center',
                color='blue', fontsize=8)
        ax3.text(0.5, 0.2, caption2,
                verticalalignment='top', horizontalalignment='center',
                color='lightblue', fontsize=6)

        ax3.axis('off')

        fig3
    </py-script>
    <py-script output="chart3">
        temps = pd.DataFrame()
        temps['Day'] = ('Yesterday', 'Today')
        temps['Temperature'] = (24,29)

        fig, ax = plt.subplots(figsize=(2,1))
        ax.axis('off')
        ax.table(cellText=temps.values, 
        colLabels=temps.columns, 
        colColours =["lightgrey"]*2,
        loc='center')

        fig
    </py-script>
        <py-script output="chart4">
        temps = pd.DataFrame()
        temps['Day'] = ('Yesterday', 'Today')
        temps['Temperature'] = (24,29)

        temps
    </py-script>
</body>

</html>